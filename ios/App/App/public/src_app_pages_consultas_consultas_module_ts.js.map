{"version":3,"file":"src_app_pages_consultas_consultas_module_ts.js","mappings":"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","sources":["./src/app/pages/consultas/consultas-routing.module.ts","./src/app/pages/consultas/consultas.module.ts","./src/app/pages/consultas/consultas.page.ts","./src/app/services/dbconsulta.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ConsultasPage } from './consultas.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConsultasPage,\n  },\n  {\n    path: 'modificar',\n    loadChildren: () => import('./modificar/modificar.module').then( m => m.ModificarPageModule)\n  },\n  {\n    path: 'agregar',\n    loadChildren: () => import('./agregar/agregar.module').then( m => m.AgregarPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConsultasPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConsultasPageRoutingModule } from './consultas-routing.module';\nimport { ConsultasPage } from './consultas.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConsultasPageRoutingModule\n  ],\n  declarations: [ConsultasPage]\n})\nexport class ConsultasPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavigationExtras, Router } from '@angular/router';\nimport { DbconsultaService } from 'src/app/services/dbconsulta.service';\n\n\n@Component({\n  selector: 'app-consultas',\n  templateUrl: 'consultas.page.html',\n  styleUrls: ['consultas.page.scss'],\n})\nexport class ConsultasPage {\n\n  consultas: any = [\n    {\n      titulo: \"Titulo de la Consulta\",\n      especialista: \"Especialistas\",\n      texto: \"Texto \"\n    }\n  ]\n\n  constructor(private router: Router, private servicioBD: DbconsultaService) {}\n\n  ngOnInit(){\n    //this.servicioBD.presentAlert(\"1\");\n    this.servicioBD.dbState().subscribe((res) =>{\n      //this.servicioBD.presentAlert(\"2\");\n      if(res){\n        //this.servicioBD.presentAlert(\"3\");\n        this.servicioBD.fetchConsultas().subscribe(item =>{\n          this.consultas = item;\n        })\n      }\n      //this.servicioBD.presentAlert(\"4\");\n    });\n  }\n\n  getItem($event) {\n    const valor = $event.target.value;\n    console.log('valor del control: ' + valor);\n\n  }\n\n  agregar() {\n\n  }\n\n  editar(item) {\n    this.servicioBD.presentToast(\"Listo\");\n    let navigationextras: NavigationExtras = {\n      state : {\n        idEnviado : item.id,\n        tituloEnviado : item.titulo,\n        especialistaEnviado : item.especialista,\n        textoEnviado : item.texto\n      }\n    }\n    this.servicioBD.presentToast(\"Aqui\");\n    this.router.navigate(['./consultas/modificar'],navigationextras);\n\n  }\n\n  eliminar(item) {\n    this.servicioBD.deleteConsulta(item.id);\n    this.servicioBD.presentToast(\"Consulta Eliminada\");\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { SQLite, SQLiteObject } from '@awesome-cordova-plugins/sqlite/ngx';\nimport { Platform, ToastController } from '@ionic/angular';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { Consultas } from './consultas';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DbconsultaService {\n  public database: SQLiteObject;\n\n  tablaConsultas: string = \"CREATE TABLE IF NOT EXISTS consulta(id INTEGER PRIMARY KEY autoincrement, titulo VARCHAR(50) NOT NULL, especialista VARCHAR(50) NOT NULL, texto TEXT NOT NULL);\";\n  registro: string = \"INSERT or IGNORE INTO consulta(id, titulo, especialista, texto) VALUES (1, 'Titulo consulta', 'especialista','Texto de la consulta que se quiere mostrar');\";\n  listaConsultas = new BehaviorSubject([]);\n\n  private isDbReady: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  constructor(private sqlite: SQLite, private platform: Platform, public toastController: ToastController) {\n    this.crearBD();\n   }\n\n   addConsulta(titulo, especialista, texto){\n    let data=[titulo,especialista,texto];\n    return this.database.executeSql('INSERT INTO consulta(titulo,especialista,texto) VALUES(?,?,?)',data)\n    .then(res =>{\n      this.buscarConsultas();\n    })\n\n  }\n\n  updateConsulta(id, titulo, especialista, texto){\n    let data = [titulo, especialista,texto, id];\n    return this.database.executeSql('UPDATE consulta SET titulo = ?, especialista = ?, texto = ? WHERE id = ?',data)\n    .then(data2 =>{\n      this.buscarConsultas();\n    })\n\n  }\n\n  deleteConsulta(id){\n    return this.database.executeSql('DELETE FROM consulta WHERE id = ?', [id])\n    .then(a =>{\n      this.buscarConsultas();\n    })\n  }\n\n  dbState() {\n    return this.isDbReady.asObservable();\n  }\n\n  crearBD() {\n    this.platform.ready().then(() => {\n      this.sqlite.create({\n        name: 'Consultas3.db',\n        location: 'default'\n\n      }).then((db: SQLiteObject) => {\n        this.database = db;\n        this.presentToast(\"BD Creada\");\n        //llamamos a la creación de tablas\n        this.crearTablas();\n      }).catch(e => this.presentToast(e));\n    })\n  }\n\n  async crearTablas() {\n    try {\n      await this.database.executeSql(this.tablaConsultas, []);\n      await this.database.executeSql(this.registro, []);\n      this.presentToast(\"Tabla Creada\");\n      this.buscarConsultas();\n      this.isDbReady.next(true);\n    } catch (e) {\n      this.presentToast(\"error creartabla \" + e);\n    }\n  }\n\n  buscarConsultas() {\n    //this.presentAlert(\"a\");\n    return this.database.executeSql('SELECT * FROM consulta', []).then(res => {\n      let items: Consultas[] = [];\n      //this.presentAlert(\"b\");\n      if (res.rows.length > 0) {\n        //this.presentAlert(\"c\");\n        for (var i = 0; i < res.rows.length; i++) {\n          //this.presentAlert(\"d\");\n          items.push({\n            id: res.rows.item(i).id,\n            titulo: res.rows.item(i).titulo,\n            especialista: res.rows.item(i).especialista,\n            texto: res.rows.item(i).texto\n          });\n        }\n      }\n      //this.presentAlert(\"d\");\n      this.listaConsultas.next(items);\n    });\n  }\n\n  fetchConsultas(): Observable<Consultas[]> {\n  return this.listaConsultas.asObservable();\n  }\n\n  async presentToast(mensaje: string) {\n  const toast = await this.toastController.create({\n    message: mensaje,\n    duration: 3000\n  });\n  toast.present();\n  }\n\n\n\n}"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}